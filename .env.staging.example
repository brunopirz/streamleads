# =============================================================================
# CONFIGURAÇÃO DE AMBIENTE - STAGING
# StreamLeads - Ambiente de Homologação
# =============================================================================
# Este arquivo contém as variáveis de ambiente para o ambiente de staging.
# Copie este arquivo para .env.staging e configure os valores apropriados.

# =============================================================================
# CONFIGURAÇÃO GERAL
# =============================================================================
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# DOMÍNIO E SSL
# =============================================================================
# Domínio principal (sem protocolo)
DOMAIN=staging.streamleads.com

# Email para certificados SSL (Let's Encrypt)
ACME_EMAIL=admin@streamleads.com

# CORS Origins (separados por vírgula)
CORS_ORIGINS=["https://staging-dashboard.streamleads.com","https://staging-api.streamleads.com"]

# =============================================================================
# SEGURANÇA
# =============================================================================
# Chave secreta para JWT e criptografia (ALTERE ESTA CHAVE!)
SECRET_KEY=staging-super-secret-key-change-this-in-production-12345

# Autenticação básica para Traefik Dashboard (user:password em base64)
# Gere com: echo $(htpasswd -nb admin password) | sed -e s/\$/\$\$/g
TRAEFIK_AUTH=admin:$$2y$$10$$example$$hash$$here

# =============================================================================
# BANCO DE DADOS POSTGRESQL
# =============================================================================
POSTGRES_DB=streamleads_staging
POSTGRES_USER=streamleads_staging
POSTGRES_PASSWORD=staging_password_change_this
POSTGRES_HOST=db
POSTGRES_PORT=5432

# URL completa do banco (gerada automaticamente)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# REDIS
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# URLs do Redis
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/1
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/2

# =============================================================================
# CONFIGURAÇÕES DA API
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_TIMEOUT=30

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# EMAIL/SMTP
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@streamleads.com
SMTP_PASSWORD=your_smtp_password
SMTP_TLS=true
SMTP_SSL=false

# Email padrão do remetente
FROM_EMAIL=noreply@streamleads.com
FROM_NAME=StreamLeads Staging

# =============================================================================
# CELERY
# =============================================================================
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=America/Sao_Paulo
CELERY_ENABLE_UTC=true

# Configurações de retry
CELERY_TASK_RETRY_DELAY=60
CELERY_TASK_MAX_RETRIES=3

# =============================================================================
# FLOWER (MONITORAMENTO CELERY)
# =============================================================================
FLOWER_USER=admin
FLOWER_PASSWORD=staging_flower_password
FLOWER_PORT=5555

# =============================================================================
# MONITORAMENTO
# =============================================================================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=staging_grafana_password
GRAFANA_PORT=3000

# =============================================================================
# INTEGRAÇÕES EXTERNAS
# =============================================================================
# n8n
N8N_ENABLED=false
N8N_WEBHOOK_URL=https://staging-n8n.streamleads.com/webhook
N8N_API_KEY=your_n8n_api_key

# Zapier
ZAPIER_ENABLED=false
ZAPIER_WEBHOOK_URL=https://hooks.zapier.com/hooks/catch/your_hook

# Make.com (Integromat)
MAKE_ENABLED=false
MAKE_WEBHOOK_URL=https://hook.integromat.com/your_webhook

# WhatsApp Business API
WHATSAPP_ENABLED=false
WHATSAPP_TOKEN=your_whatsapp_token
WHATSAPP_PHONE_ID=your_phone_id
WHATSAPP_VERIFY_TOKEN=your_verify_token

# =============================================================================
# ARMAZENAMENTO
# =============================================================================
# Tipo de storage: local, s3
STORAGE_TYPE=local

# AWS S3 (se STORAGE_TYPE=s3)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_STORAGE_BUCKET_NAME=streamleads-staging
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=

# =============================================================================
# BACKUP
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Todo dia às 2h
BACKUP_RETENTION_DAYS=7
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=streamleads-staging-backups

# =============================================================================
# LOGGING
# =============================================================================
# Sentry (monitoramento de erros)
SENTRY_ENABLED=true
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# CACHE
# =============================================================================
CACHE_ENABLED=true
CACHE_TTL=300  # 5 minutos
CACHE_MAX_ENTRIES=1000

# =============================================================================
# STREAMLIT DASHBOARD
# =============================================================================
STREAMLIT_HOST=0.0.0.0
STREAMLIT_PORT=8501
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=0.0.0.0
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false
STREAMLIT_SERVER_ENABLE_CORS=false
STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION=true

# URL da API para o dashboard
API_BASE_URL=https://staging-api.${DOMAIN}

# =============================================================================
# RECURSOS E LIMITES
# =============================================================================
# Limites de memória (em MB)
API_MEMORY_LIMIT=512
DASHBOARD_MEMORY_LIMIT=512
WORKER_MEMORY_LIMIT=512
DB_MEMORY_LIMIT=512
REDIS_MEMORY_LIMIT=256

# Limites de CPU (em cores)
API_CPU_LIMIT=0.5
DASHBOARD_CPU_LIMIT=0.5
WORKER_CPU_LIMIT=0.5
DB_CPU_LIMIT=0.5
REDIS_CPU_LIMIT=0.25

# =============================================================================
# HEALTH CHECKS
# =============================================================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# =============================================================================
# NOTIFICAÇÕES
# =============================================================================
# Slack
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook
SLACK_CHANNEL=#staging-alerts

# Discord
DISCORD_ENABLED=false
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/discord/webhook

# Telegram
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# =============================================================================
# ANALYTICS
# =============================================================================
# Google Analytics
GA_ENABLED=false
GA_TRACKING_ID=UA-XXXXXXXXX-X

# Hotjar
HOTJAR_ENABLED=false
HOTJAR_ID=your_hotjar_id

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_LEAD_SCORING=true
FEATURE_AUTOMATIONS=true
FEATURE_INTEGRATIONS=true
FEATURE_ANALYTICS=true
FEATURE_NOTIFICATIONS=true

# =============================================================================
# TIMEZONE E LOCALIZAÇÃO
# =============================================================================
TIMEZONE=America/Sao_Paulo
LOCALE=pt_BR
CURRENCY=BRL

# =============================================================================
# VARIÁVEIS DE DEBUG (APENAS STAGING)
# =============================================================================
DEBUG_TOOLBAR=false
DEBUG_SQL=false
DEBUG_CELERY=false

# =============================================================================
# DOCKER COMPOSE
# =============================================================================
# Registry para imagens Docker
REGISTRY=ghcr.io
IMAGE_NAME=streamleads
IMAGE_TAG=staging

# Compose project name
COMPOSE_PROJECT_NAME=streamleads-staging

# =============================================================================
# NOTAS IMPORTANTES
# =============================================================================
# 1. NUNCA commite este arquivo com valores reais no Git
# 2. Use senhas fortes e únicas para cada serviço
# 3. Mantenha as chaves de API seguras
# 4. Configure SSL/TLS para todos os serviços em produção
# 5. Monitore logs e métricas regularmente
# 6. Faça backups regulares do banco de dados
# 7. Teste todas as integrações antes de usar em produção
# 8. Use certificados SSL válidos (Let's Encrypt)
# 9. Configure firewall e regras de segurança adequadas
# 10. Mantenha o sistema sempre atualizado